<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:hx="http://www.w3.org/1999/xhtml">
<head  th:fragment="head">
    <meta charset="utf-8">
    <title th:text="'SGS' + ${title != null ? '-' + title : ''}"></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Boostrap-->
    <link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
    <!--fin boostrap-->

    <!--Archivo css-->
    <link rel="stylesheet" href="/css/Index.css">
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/css/ListarUsuarios.css">
    <!--fin css-->

    <!--archivo js-->
    <script  type="text/javascript" src="/js/index.js"></script>
    <!--Fin archivo js-->

    <!-- HTMX -->
    <script src="/js/htmx.min.js"></script>
</head>
<body>
    <div th:fragment="nav">
        <!--Inicio barra de navegacion------------------------------------------------------------------>
        <nav class="navbar navbar-expand-lg navbar-dark bg-light">
            <div class="container-fluid">

                <img class="navbar-brand logo" src="/img/Logo-UABC.png" alt="Logo-UABC">

                <div class="collapse navbar-collapse" id="navbarSupportedContent">

                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" id="titulo" aria-current="page" href="/">SISTEMA DE GESTIÓN DE SALIDAS</a>
                        </li>
						<div>
							<li class="nav-item active" id="inicio">
                            <a class="nav-link" href="/" onclick="cambiarOpcion()">Inicio</a>
                        </li>
						</div>
                        
                        <div class="col-3" sec:authorize="hasAnyRole('ROLE_ADMINISTRADOR','ROLE_SUBDIRECTOR')">
                            <li class="nav-item active" id="administrar">
                                <a class="nav-link" href="/admin/administrarCuenta">Administrar Cuentas</a>
                            </li>
                        </div>

                        <div class="col-4" >
                            <li class="nav-item active" id="historialSolicitudes">
                                <a class="nav-link" href="/historialDeSolicitudes">Historial de Solicitudes</a>
                            </li>
                        </div>

						<div class="col-2">
							<li class="nav-item">
	                            <!-- Este botón hace una petición get para obtener el perfil, el resultado se coloca en el
	                                 elemento de la clase modal-body dentro del modal ModalPerfil -->
	                            <button id="btn-perfil" class="btn"
	                                    data-bs-toggle="modal"
	                                    data-bs-target="#ModalPerfil"
	                                    hx-get="/usuario/perfil"
	                                    hx-target="#ModalPerfil .modal-body">Ver Perfil</button>
	                        </li>
						</div>
                        

                            <div class="col-2" sec:authorize="isAuthenticated()">
								<li class="nav-item opc" id="cerrarSesion">
                                <a class="nav-link" th:href="@{/logout}">Cerrar sesión</a>
                                </li>
                            </div>

                    </ul>
                </div>
            </div>
        </nav>
        <!-- Div para mensajes de resultado -->
        <div id="result"></div>
        <!--Fin Barra de navegacion----------------------------------------------------------------------->
        <!--Perfil de usuario-->
        <div class="modal fade m1" id="ModalPerfil" tabindex="-1" role="dialog" aria-labelledby="ModalPerfilTitle"
             aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">

                <!--method="post" action="/registrar-usuario/registrar"-->
                <div class="modal-content" id="modal">
                    <form class="form-control"
                          hx-post="/usuario/editar"
                          hx-target="#result"
                          hx-confirm="¿Seguro que desea guardar los cambios?"
                          hx-disinherit="hx-confirm"
                          hx-swap="innerHTML">

                        <div class="modal-header">
                            <h5 class="modal-title" id="ModalPerfilTitle">Perfil usuario</h5>
                        </div>

                        <div class="modal-body" id="modal-perfil-body" hx-swap="innerHTML">
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button class="btn btn-primary" id="editar-guardar-btn"
                                    sec:authorize="hasAnyRole('ROLE_DOCENTE')"
                            >
                                Editar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</body>
</html>